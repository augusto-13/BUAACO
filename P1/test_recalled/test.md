# P1上机考试复盘
##### 田笑滢 20375190 (学生)

## `L1` 奇校验与偶校验
一个比较简单的组合逻辑。但有一点需要注意：由于用最高位来调整奇偶性，在算1的个数的时候是不包括最高位的（不管最高位是0还是1），我就因为这点第一次提交WA了……
在算1的个数方面，个人觉得最好用的就是 **异或**`^` 了。异或运算在1的个数为奇数时为1，在个数为偶数时为0，根据这个特点我们可以一步直接写出最高位的表达式：（忘了输出用啥表示，先暂时用 `out` 表示）
``` js
assign out[31] = (^data[30:0]) ^ check;
```

## `L2` 心情电路
题干已经非常清楚地说明了状态转移了，我们只需要用代码把它实现就好。注意 `sad` 到 `clueless` 的2周期计数与 `busy` 和 `clueless` 到 `asleep` 的3周期计数的复位，以及 `异步复位` 要将 `posedge reset` 写入 `always` 的敏感信号中即可。
这道题主要是题干冗长（让我想起了小学的应用题……），但边读题边画状态转移图，之后再照着图 `coding` 就会简单很多（所以考试要拿足草稿纸啊）。
## `L3` 方程式匹配
考场上想的就是简单粗暴地罗列状态：`初始态`，`等号左边字母/数字`，`等号左边运算符`，`等号`，`等号右边字母/数字`，`等号右边运算符`，以及`不匹配输入`。状态转移就不赘述了，然后在等号右边字母/数字状态输出1。最后注意异步复位和空格输入直接跳过状态转移就行。
然后助教问答的时候给我说 **用两个状态机比用一个要省状态** ，再加上自己确实打了很多重复的代码，于是陷入思考……目前想的是改成`初始态/运算符`、`字母/数字`、`不匹配输入`三种状态，同时设置存储等号的状态机，在`字母/数字状态`且`出现过一次等号`的时输出1。还有更简单的方法欢迎分享哈。

另外助教问答时提到怎么`查看中间变量`（例如这道题中的`status`），我表示从来没用过，都是波形错了直接改主代码或者提交结果错了直接改调试用的数据（助教：好家伙）。这里还是记一下吧：ISim界面最左边一栏第一行展开，下面有一个uut，单击就可以在旁边一栏中看到中间变量啦。 
## `附加题` 补全代码
大胆假设，小心验证！
把波形的 `in` 和 `out` 一一对应写在草稿纸上，然后写出每一步转移的状态，空出来的状态一个一个试就能试出来。